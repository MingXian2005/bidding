<!DOCTYPE html>
<html>
<head>
    <title>Bidding Page</title>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <script>
        var socket = io();

        socket.on('new_bid', function(data) {
            // Option 1: Reload the page (simple)
            location.reload();

            // Option 2: Or, update the table dynamically (advanced)
            // You can fetch new bids via AJAX and update the table here
        });
    </script>
</head>
<body>
    <h1>Bidding Rankings</h1>
    <table border="1" cellpadding="5" cellspacing="0">
        <thead>
            <tr>
                <th>Rank</th>
                <th>Identification Key</th>
                <th>Bid Amount</th>
                <th>Timestamp</th>
            </tr>
        </thead>
        <tbody>
            {% for bid in bids %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>{{ bid.user.IdentificationKey }}</td>
                <td>{{ bid.amount }}</td>
                <td>{{ bid.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</td>
            </tr>
            {% else %}
            <tr><td colspan="4">No bids found.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>
